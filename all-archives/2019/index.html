
<!DOCTYPE html>
<html lang="en">
    
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Jason&#39;s blog">
    <title>Archives: 2019 - Jason&#39;s blog</title>
    <meta name="author" content="Jason Ma">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="Valar morghulis, valar dohaeris.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Jason&#39;s blog">
<meta property="og:url" content="http://www.mazhixian.me/all-archives/2019/index.html">
<meta property="og:site_name" content="Jason&#39;s blog">
<meta property="og:description" content="Valar morghulis, valar dohaeris.">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jason&#39;s blog">
<meta name="twitter:description" content="Valar morghulis, valar dohaeris.">
    
    
        
    
    
        <meta property="og:image" content="http://www.mazhixian.me/assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-pz4cc6y13wt2trzqa8l3n9v0yykr0sstdaheem7qj628nhjmhp9pfawvqawz.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-112822605-1', 'auto');
        ga('send', 'pageview');
    </script>


    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?20f3bcc8683b066ff79f4e36134e3982";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

    <body>
        <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Jason&#39;s blog</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Jason Ma</h4>
                
                    <h5 class="sidebar-profile-bio"><p>We are in the same story.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Categories"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archives"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="Search"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/myinxd" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:zx@mazhixian.me" target="_blank" rel="noopener" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/404.html"
                            
                            title="Naive"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-hourglass-start" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Naive</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2019/07/27/configure-rtl1868-wireless-ethernet-card-on-ubuntu1610/">
                            Configure rtl8168 wireless ethernet card on Ubuntu 16.10
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2019-07-27T19:16:02+08:00">
	
		    Jul 27, 2019
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>Ubuntu 16.10 配置无线网卡驱动的问题，同样适用14.04和16.04。针对的设备是<code>Realtek RTL8111/8168 PCI Express Gigabit Ethernet Controller</code>，表现为网络不稳定，经常掉线，且网速较慢，分析后认为是驱动不匹配。</p>
<p><strong>Ubuntu自带的驱动为<code>r8169</code>，高于此类网卡，导致兼容性差，影响了网络连接效果。</strong> 解决方法如下，参考链接见文末。</p>
<h3 id="1-Check-driver-and-device-info"><a href="#1-Check-driver-and-device-info" class="headerlink" title="1. Check driver and device info"></a>1. Check driver and device info</h3><p>查看系统为网卡型号和对应的驱动，利用如下指令<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ lspci -vv &gt;&gt; device.txt</div></pre></td></tr></table></figure></p>
<p>打开<code>device.txt</code>，找到网卡设备，样例如下。其中驱动部分显示为<code>r8169</code>，与现有网卡不吻合<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">03:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 0b)</div><div class="line">Subsystem: Acer Incorporated [ALI] RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller</div><div class="line">Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B-DisINTx+</div><div class="line">Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx-</div><div class="line">Latency: 0, Cache Line Size: 64 bytes</div><div class="line">Interrupt: pin A routed to IRQ 27</div><div class="line">Region 0: I/O ports at d000 [size=256]</div><div class="line">Region 2: Memory at f7104000 (64-bit, prefetchable) [size=4K]</div><div class="line">Region 4: Memory at f7100000 (64-bit, prefetchable) [size=16K]</div><div class="line">Capabilities: &lt;access denied&gt;</div><div class="line">Kernel driver <span class="keyword">in</span> use: r8169</div><div class="line">Kernel modules: r8169</div></pre></td></tr></table></figure></p>
<h4 id="2-Download-driver-of-r8168"><a href="#2-Download-driver-of-r8168" class="headerlink" title="2. Download driver of r8168"></a>2. Download driver of r8168</h4><p>从<code>Realtek</code>官网下载<code>rtl8168</code>的<a href="http://www.realtek.com.tw/downloads/downloadsView.aspx?Langid=1&amp;PNid=13&amp;PFid=5&amp;Level=5&amp;Conn=4&amp;DownTypeID=3&amp;GetDown=false#2" target="_blank" rel="external">驱动</a>, 需要根据Linux的内核版本进行选择，例如我的内核是4.9.1,则选择<code>4.7</code>以上的驱动。</p>
<p><strong>更新[2019-07-28]</strong>：Realtek的官方链接貌似打不开了，而且在我的系统更新到18.04以及内核更新以后出现了奇怪的编译错误（如下）,Google以后发现是因为内核4.15以后，<code>setup_timer</code>函数被更新为<code>timer_setup</code>，因此出现了编译错误的问题。参考<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=882838" target="_blank" rel="external">建议</a>,安装更新后的<code>r8168.045.08-2</code>驱动能够解决问题，该驱动的下载链接为<a href="https://launchpad.net/ubuntu/cosmic/+package/r8168-dkms" target="_blank" rel="external">这里</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">error: implicit declaration of <span class="keyword">function</span> ‘setup_timer’; did you mean ‘sk_stop_timer’? [-Werror=implicit-function-declaration]</div><div class="line">         setup_timer(timer, rtl8168_esd_timer, (unsigned long)dev);</div><div class="line">         ^~~~~~~~~~~</div><div class="line">         sk_stop_timer</div></pre></td></tr></table></figure>
<h4 id="3-Install-driver"><a href="#3-Install-driver" class="headerlink" title="3. Install driver"></a>3. Install driver</h4><p>安装驱动，用如下指令，安装完成后要重启系统。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ tar -xvf 0010-r8168-8.045.08.tar.bz2</div><div class="line">$ <span class="built_in">cd</span> r8168-8.045.08 </div><div class="line">$ sudo ./autorun.sh</div><div class="line">$ sudo reboot</div></pre></td></tr></table></figure></p>
<p>重启以后，理论上网络连接恢复正常。重新查看系统设备信息，有如下结果，驱动已经更新为<code>r8168</code>。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">03:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 0b)</div><div class="line">Subsystem: Acer Incorporated [ALI] RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller</div><div class="line">Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B-DisINTx+</div><div class="line">Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx-</div><div class="line">Latency: 0, Cache Line Size: 64 bytes</div><div class="line">Interrupt: pin A routed to IRQ 27</div><div class="line">Region 0: I/O ports at d000 [size=256]</div><div class="line">Region 2: Memory at f7104000 (64-bit, prefetchable) [size=4K]</div><div class="line">Region 4: Memory at f7100000 (64-bit, prefetchable) [size=16K]</div><div class="line">Capabilities: &lt;access denied&gt;</div><div class="line">Kernel driver <span class="keyword">in</span> use: r8168</div><div class="line">Kernel modules: r8168</div></pre></td></tr></table></figure></p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[1] <a href="https://www.cnblogs.com/duwanjiang/p/5907634.html" target="_blank" rel="external">Ubuntu 16.04 RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller” 不能上网</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2019/07/27/configure-rtl1868-wireless-ethernet-card-on-ubuntu1610/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2019/06/11/use-spacemacs-under-org-mode-notebook-1/">
                            利用Spacemacs的org-mode记笔记
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2019-06-11T16:34:21+08:00">
	
		    Jun 11, 2019
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>在师兄的安利下入坑了emacs，一个传说中学习曲线比vim还陡的编辑器 (好像Vim更陡一点)，目前的体会是<strong>小拇指疼</strong>。但是，上手以后就真的不想用其他的编辑器了 (小声BB我正在用markdown写博客)。集成了Vim使用习惯的spacemacs非常适合用来记笔记，如果熟悉latex语法的话，甚至能比手写效率高。写代码的话，还是gedit吧，除了缩进不好用，其实还行 (感觉要被码农口水淹死)。。。</p>
<center>
<img src="https://github.com/myinxd/canal-images/blob/master/images/blog-190611/fig1.png?raw=true" height="300" width="500">
</center>

<p>这篇笔记简单记录一下spacemacs的安装流程 (Ubuntu 18.04和macOS)，基于org-mode的语法和导出为pdf的流程，以及添加spacemacs对中文的支持。最后一点算是重点内容，谷歌了很久找到了相对容易理解的方法。</p>
<h2 id="spacemacs的安装-Ubuntu和macOS"><a href="#spacemacs的安装-Ubuntu和macOS" class="headerlink" title="spacemacs的安装 (Ubuntu和macOS)"></a>spacemacs的安装 (Ubuntu和macOS)</h2><p>针对spacemacs的安装，参考其github上的<a href="https://github.com/syl20bnr/spacemacs#default-installation" target="_blank" rel="external">README</a>即可，我会简述一下在Ubuntu 18.04 (Linux) 和macOS上的安装和配置方式，目前都是默认配置。</p>
<h4 id="Ubuntu-18-04"><a href="#Ubuntu-18-04" class="headerlink" title="Ubuntu 18.04"></a>Ubuntu 18.04</h4><p>针对Ubuntu 18.04的spacemacs安装过程分为以下三步，即</p>
<ol>
<li><p>下载emacs (要求版本高于emacs 24，Ubuntu14.04貌似不支持，需要独立下载并编译)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> sudo apt update</span></div><div class="line"><span class="meta">$</span><span class="bash"> sudo apt install emacs</span></div><div class="line"><span class="meta">#</span><span class="bash"> 查看一下版本信息</span></div><div class="line"><span class="meta">$</span><span class="bash"> emacs --version</span></div><div class="line">GNU Emacs 25.2.2</div><div class="line">Copyright (C) 2017 Free Software Foundation, Inc.</div><div class="line">GNU Emacs comes with ABSOLUTELY NO WARRANTY.</div><div class="line">You may redistribute copies of GNU Emacs</div><div class="line">under the terms of the GNU General Public License.</div><div class="line">For more information about these matters, see the file named COPYING.</div></pre></td></tr></table></figure>
</li>
<li><p>配置spacemacs<br>参考spacemacs的default installation，首先克隆其repository到/home/xxx(这里的xxx是用户名)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/syl20bnr/spacemacs ~/.emacs.d</span></div></pre></td></tr></table></figure>
</li>
<li><p>安装相关插件<br>命令行输入emacs初始化spacemacs环境，完成安装。这一步具体安装什么还没太懂，后面慢慢研究一下。<strong>建议安装过程中选择默认的编辑工具为vim</strong>，个人感觉vim比较适合初学者，掌握几个基本命令就可以工作了。</p>
</li>
</ol>
<h4 id="macOS-10-14"><a href="#macOS-10-14" class="headerlink" title="macOS 10.14"></a>macOS 10.14</h4><p>针对macOS，我的系统是10.14 Mojave。因为用户习惯，我把macOS的terminal当linux用，所以这里的安装步骤与Ubuntu类似，仅在第一步有区别。即安装emacs时，采用<code>homebrew</code>工具，具体的命令行写法如下：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> brew install emacs</span></div></pre></td></tr></table></figure></p>
<p>除此之外，spacemacs官方也提供了安装教程，可以参考<a href="https://github.com/syl20bnr/spacemacs#macos" target="_blank" rel="external">这里</a>。</p>
<h2 id="org-mode的基本语法"><a href="#org-mode的基本语法" class="headerlink" title="org-mode的基本语法"></a>org-mode的基本语法</h2><p>介绍完spacemacs的安装，便可以开始记笔记了，这里采用的是<a href="https://orgmode.org/" target="_blank" rel="external">org-mode</a>，org除了提供将文本导出为html和pdf格式外，还可以制作TODO list和日历等，非常适合日常的工作。对于工科孩子，笔记或者小论文的内容主要包含文字、公式、图表、链接和参考文献等，简单举例说明一下他们的语法，详细内容可以参考<a href="https://www.cnblogs.com/Open_Source/archive/2011/07/17/2108747.html" target="_blank" rel="external">这篇博客</a>，翻译自org的官方文档，非常详细。我在<a href="https://github.com/myinxd/canal-notebooks/blob/master/org-template/org-template.org" target="_blank" rel="external">这里</a>提供了一个与本文内容相同的org笔记以及导出的pdf，感兴趣的话可以作为参考模板。效果如下图</p>
<center>
<img src="https://github.com/myinxd/canal-images/blob/master/images/blog-190611/fig2.png?raw=true" height="480" width="750">
</center>

<p><strong>注意：如果要导出pdf，需要预先安装tex套件，建议Texlive</strong>，在Ubuntu下可以之间用<code>sudo apt install texlive-2016</code>实现。</p>
<h4 id="文档初始化"><a href="#文档初始化" class="headerlink" title="文档初始化"></a>文档初始化</h4><p>spacemacs通过文件的后缀名识别文档的类型，对于org-mode，文件的后缀需要为<code>.org</code>。可以采用如下方式初始化笔记并保存，<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> emacs notebook.org</span></div></pre></td></tr></table></figure></p>
<h4 id="添加笔记的标题和作者等信息"><a href="#添加笔记的标题和作者等信息" class="headerlink" title="添加笔记的标题和作者等信息"></a>添加笔记的标题和作者等信息</h4><p>通过在文档头部添加相关的称为”In-buffer settings”的关键字及相关的内容，例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#+TITLE: A notebook of spacemacs</div><div class="line">#+AUTHOR: Pikachu</div><div class="line">#+DATE: 2016-06-11</div></pre></td></tr></table></figure></p>
<h4 id="不同级别标题的基本语法"><a href="#不同级别标题的基本语法" class="headerlink" title="不同级别标题的基本语法"></a>不同级别标题的基本语法</h4><p>与markdown类似，org提供了由<code>*</code>引导的分级标题的语法规则，例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">* 一级标题</div><div class="line">** 二级标题</div><div class="line">*** 三级标题</div><div class="line">普通文字</div></pre></td></tr></table></figure></p>
<p>一旦该行设定为标题，spacemacs会对该标题所在区域进行自动折叠，通过<code>TAB</code>键可以实现段落的展开和折叠。</p>
<h4 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h4><p>同样的，与markdown类似，org支持添加表格，常用的表格样例如下，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">| Name  | Phone | Age |</div><div class="line">|------ +-------+-----|</div><div class="line">| Alice | 12345 | 20  |</div><div class="line">| Bob   | 23456 | 21  |</div></pre></td></tr></table></figure></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Name</th>
<th style="text-align:center">Phone</th>
<th style="text-align:center">Age</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Alice</td>
<td style="text-align:center">12345</td>
<td style="text-align:center">20</td>
</tr>
<tr>
<td style="text-align:center">Bob</td>
<td style="text-align:center">23456</td>
<td style="text-align:center">21</td>
</tr>
</tbody>
</table>
</div>
<p>在表格的填写过程中，有几个快捷键非常好用，例如<code>TAB</code>键用于对齐和增加新的行，其他快捷键建议参考<a href="https://www.cnblogs.com/Open_Source/archive/2011/07/17/2108747.html#sec-3" target="_blank" rel="external">这里</a>。</p>
<h4 id="公式和代码"><a href="#公式和代码" class="headerlink" title="公式和代码"></a>公式和代码</h4><p>在org-mode下插入公式等价于在latex文档中的操作，直接以equation环境或者<code>$</code>环境即可，例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">\begin&#123;equation&#125;</div><div class="line">	x = a + b</div><div class="line">\end&#123;equation&#125;</div></pre></td></tr></table></figure></p>
<script type="math/tex; mode=display">
\begin{equation}
x = a + b
\end{equation}</script><p>插入代码则采用由<code>#+</code>引导的block，即<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#+BEGIN_SRC &lt;language&gt;</div><div class="line">code body</div><div class="line">#+END_SRC</div><div class="line"></div><div class="line"># For example</div><div class="line">#+BEGIN_SRC python</div><div class="line">print(&quot;Hello world!&quot;)</div><div class="line">#+END_SRC</div></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">"Hello world!"</span>)</div></pre></td></tr></table></figure>
<h4 id="超链接和脚注"><a href="#超链接和脚注" class="headerlink" title="超链接和脚注"></a>超链接和脚注</h4><p>org对于超链接的支持要优于markdown，能够支持网址、本地文件、文档内部超链接等功能，例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 网址</div><div class="line">[[&lt;网址&gt;][&lt;描述&gt;]]</div><div class="line"># 本地文件</div><div class="line">[[./file.xxx]]</div><div class="line"># 文档内部超链接</div><div class="line">[[超链接和脚注]]</div></pre></td></tr></table></figure></p>
<p>而脚注的添加方式有两种，即org-mode和基于latex语法的方式，二者在生成的pdf中效果相同。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># org-mode</div><div class="line">引用方式： 这是一个脚注[fn:1]，它的位置在本页下方。</div><div class="line">脚注格式: [fn:1] 这是一个脚注。</div><div class="line"></div><div class="line"># latex格式</div><div class="line">这是一个脚注\footnote&#123;这是一个脚注&#125;</div></pre></td></tr></table></figure></p>
<h4 id="导出为pdf"><a href="#导出为pdf" class="headerlink" title="导出为pdf"></a>导出为pdf</h4><p>最后，需要将记录的文档导出为pdf文件，导出方法是<code>Ctrl+c-Ctrl+e-l-p</code>。</p>
<h2 id="添加中文支持"><a href="#添加中文支持" class="headerlink" title="添加中文支持"></a>添加中文支持</h2><p>受到系统语言设置的限制，spacemacs对于中文的支持存在一些小bug。当系统的语言设定为中文时，直接借助已经安装的拼音输入法便可以实现中文的输入。但是当系统语言为英文时，需要添加对中文的支持。</p>
<h4 id="系统语言为英文时如何在spacemacs添加对中文输入法的支持"><a href="#系统语言为英文时如何在spacemacs添加对中文输入法的支持" class="headerlink" title="系统语言为英文时如何在spacemacs添加对中文输入法的支持"></a>系统语言为英文时如何在spacemacs添加对中文输入法的支持</h4><p>笔者的系统是Ubuntu18.04，系统语言为英文，安装了fcitx中文中文输入法，在spacemacs中添加中文支持的一种简单方法是在初始化spacemacs时添加如下语句，<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LC_CTYPE=zh_CN.UTF-8 emacs</div></pre></td></tr></table></figure></p>
<p>其中<code>LC_CTYPE</code>表示本地字符和字符串的编码格式，这里强制设定为中文UTF-8。如果笔记的内容主要为中文，可以在shell的配置文件中固定这一命令，即<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alias emacszh="LC_CTYPE=zh_CN.UTF-8 emacs"</div></pre></td></tr></table></figure></p>
<h4 id="解决导出的PDF中文不显示的问题"><a href="#解决导出的PDF中文不显示的问题" class="headerlink" title="解决导出的PDF中文不显示的问题"></a>解决导出的PDF中文不显示的问题</h4><p>在解决spacemacs对中文输入法的支持后，还需要将默认的latex编译命令由<code>pdflatex</code>修改为<code>xelatex</code>，因为前者不支持中文。参考emacs-china中的问题，可以通过如下方式修改编译指令，即在文档头部增加，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#+LATEX_HEADER: \usepackage&#123;ctex&#125;</div><div class="line">#+LATEX_COMPILIER: xelatex</div></pre></td></tr></table></figure></p>
<p>当然，针对这一问题的解决方案还挺多的，多数涉及到LISP的语法和修改spacemacs的配置文件，还是挺麻烦的。</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p>[1] <a href="http://spacemacs.org/#" target="_blank" rel="external">spacemacs</a><br>[2] <a href="https://github.com/syl20bnr/spacemacs#default-installation" target="_blank" rel="external">spacemacs default installation</a><br>[3] <a href="https://www.cnblogs.com/Open_Source/archive/2011/07/17/2108747.html" target="_blank" rel="external">Org-mode 简明手册</a><br>[4] <a href="https://emacs-china.org/t/topic/4465" target="_blank" rel="external">Org-mode 添加中文支持</a><br>[5] <a href="https://emacs-china.org/t/topic/2540" target="_blank" rel="external">Orgmode导出PDF显示不了中文</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2019/06/11/use-spacemacs-under-org-mode-notebook-1/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2019/06/10/change-file-modification-time-with-python/">
                            利用Python修改文件的最后访问和修改时间
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2019-06-10T13:21:56+08:00">
	
		    Jun 10, 2019
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>最近有个奇怪的需求，批量修改文件的访问和修改时间。原因是在windows下重命名的时候，批量修改了文件的名称。感觉跟说绕口令一样。针对这一需求，尝试利用python的<code>time</code>和<code>os</code>两个库来解决。</p>
<h5 id="查看文件的历史时间"><a href="#查看文件的历史时间" class="headerlink" title="查看文件的历史时间"></a>查看文件的历史时间</h5><p>首先基于如下代码查看文件的<code>创建</code>，<code>修改</code>和<code>最后访问</code>时间，即<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> time</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line">filepath = <span class="string">"./file.xxx"</span></div><div class="line"><span class="comment"># 查看文件时间戳</span></div><div class="line">time_create = os.path.getctime(filepath)</div><div class="line">time_modify = os.path.getmtime(filepath)</div><div class="line">time_access = os.path.getatime(filepath)</div></pre></td></tr></table></figure></p>
<p>若需要得到格式化的时间，可以利用<code>time.ctime()</code>函数获取，例如<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">print(time.ctime(time_create))</div><div class="line"></div><div class="line">Mon Jun <span class="number">13</span> <span class="number">07</span>:<span class="number">34</span>:<span class="number">19</span> <span class="number">2016</span></div></pre></td></tr></table></figure></p>
<h5 id="修改文件的创建和修改时间"><a href="#修改文件的创建和修改时间" class="headerlink" title="修改文件的创建和修改时间"></a>修改文件的创建和修改时间</h5><p>由于恢复的文件名以后，文件的修改时间发生了变化，需要对其时间戳进行修改，此时采用<code>os.utime()</code>方法来实现，例如<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">new_access_time = xxx <span class="comment"># 注意这里需要是整数</span></div><div class="line">new_modify_time = xxx <span class="comment"># 注意这里需要是整数</span></div><div class="line">os.utime(filepath, (new_access_time, new_modify_time))</div></pre></td></tr></table></figure></p>
<h5 id="References"><a href="#References" class="headerlink" title="References"></a>References</h5><p>[1] <a href="https://segmentfault.com/q/1010000009842773/a-1020000009846301" target="_blank" rel="external">python如何不改动文件的情况下修改文件的 修改日期</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2019/06/10/change-file-modification-time-with-python/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 Jason Ma. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Jason Ma</h4>
        
            <div id="about-card-bio"><p>We are in the same story.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Astronomer? Software engineer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Shanghai
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-peofhqjkzcghmndknakluequy1y6owxdwpaqyju9ntl9zxnk7rdolb3rjjoj.min.js"></script>
<!--SCRIPTS END--><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



    </body>
</html>
